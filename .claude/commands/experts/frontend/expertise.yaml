# Frontend Implementation Expertise
# Keepstar - React Feature-Sliced Architecture

overview:
  description: "React SPA for AI-powered chat widget with dynamic widget rendering"
  architecture: "Feature-Sliced Design"
  framework: "React 19"
  bundler: "Vite 7"
  language: "JavaScript (JSX)"
  styling: "CSS"
  dev_port: 5173
  api_base: "http://localhost:8080/api/v1"

project_structure:
  root: "project/frontend/"
  entry_point: "src/main.jsx"

  layers:
    shared: "src/shared/"
    entities: "src/entities/"
    features: "src/features/"
    app: "src/app/"

layer_rules:
  description: "Direction: app → features → entities → shared"
  shared:
    imports: "Only external libraries"
    contains: "API client, hooks, UI components, utilities"
  entities:
    imports: "shared/"
    contains: "Business entities: atom, widget, message"
  features:
    imports: "shared/, entities/"
    contains: "Features: chat, overlay, canvas"
  app:
    imports: "Everything"
    contains: "Entry point, providers, global styles"

core_implementation:
  app:
    file: "src/App.jsx"
    purpose: "Root component with chat toggle"
    state:
      - "isChatOpen: boolean"
    components_used:
      - "ChatPanel from features/chat"

  shared:
    api:
      file: "src/shared/api/apiClient.js"
      purpose: "HTTP client for backend"
      function: "sendChatMessage(message)"
      endpoint: "POST /api/v1/chat"
      status: "implemented"

  entities:
    atom:
      directory: "src/entities/atom/"
      atomModel:
        file: "atomModel.js"
        exports: ["AtomType"]
      AtomRenderer:
        file: "AtomRenderer.jsx"
        purpose: "Renders atom by type"
        status: "stub"

    widget:
      directory: "src/entities/widget/"
      widgetModel:
        file: "widgetModel.js"
        exports: ["WidgetType", "FormationType"]
      WidgetRenderer:
        file: "WidgetRenderer.jsx"
        purpose: "Renders widget from atoms"
        status: "stub"

    message:
      directory: "src/entities/message/"
      messageModel:
        file: "messageModel.js"
        exports: ["MessageRole"]
        values: ["USER", "ASSISTANT"]
      MessageBubble:
        file: "MessageBubble.jsx"
        purpose: "Renders message with optional widgets"
        status: "implemented"

  features:
    chat:
      directory: "src/features/chat/"
      status: "implemented"

      chatModel:
        file: "chatModel.js"
        function: "createInitialChatState()"
        state: ["sessionId", "messages", "isLoading", "error"]

      useChatMessages:
        file: "useChatMessages.js"
        returns: ["messages", "isLoading", "error", "addMessage", "setLoading", "setError", "setSessionId"]
        status: "implemented"

      useChatSubmit:
        file: "useChatSubmit.js"
        returns: ["submit"]
        status: "implemented"

      ChatPanel:
        file: "ChatPanel.jsx"
        styles: "ChatPanel.css"
        purpose: "Main chat component"
        props: ["onClose"]
        status: "implemented"

      ChatHistory:
        file: "ChatHistory.jsx"
        purpose: "Renders message list"
        props: ["messages", "isLoading"]
        status: "implemented"

      ChatInput:
        file: "ChatInput.jsx"
        purpose: "Input with send button"
        props: ["onSubmit", "disabled"]
        status: "implemented"

    overlay:
      directory: "src/features/overlay/"
      useOverlayState:
        file: "useOverlayState.js"
        returns: ["isOpen", "open", "close", "toggle"]
      FullscreenOverlay:
        file: "FullscreenOverlay.jsx"
      status: "stub"

    canvas:
      directory: "src/features/canvas/"
      status: "placeholder for future"

patterns:
  component_structure:
    - "Functional components with hooks"
    - "CSS files next to components"
    - "Props passed directly"

  hooks_pattern:
    - "use{Feature}{Action}.js"
    - "Return object with state and actions"

  naming:
    components: "PascalCase.jsx"
    hooks: "use{Name}.js"
    models: "{feature}Model.js"
    styles: "{Component}.css"

run_commands:
  install: "cd project/frontend && npm install"
  dev: "cd project/frontend && npm run dev"
  build: "cd project/frontend && npm run build"
  lint: "cd project/frontend && npm run lint"

migration_status:
  description: "Feature-sliced architecture active, chat implemented"
  completed:
    - "Migrate to features/chat/ChatPanel"
    - "Implement useChatMessages hook"
    - "Implement useChatSubmit hook"
    - "Connect to /api/v1/chat endpoint"
    - "Remove old components/Chat"
  next_steps:
    - "Implement widget rendering"
    - "Add atom components"
    - "Add canvas feature for widget display"
